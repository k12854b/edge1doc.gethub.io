<!DOCTYPE html>
<html style="font-size: 16px;" lang="fr"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>P11</title>
    <link rel="stylesheet" href="css/nicepage.css" media="screen">
<link rel="stylesheet" href="css/InterfaceCivilProtection.css" media="screen">
    <script class="u-script" type="text/javascript" src="js/jquery-1.9.1.min.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="js/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 6.11.11, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css" />
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
<!--Map definition-->
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="data/roads_edge1_1.js"></script>
        <script src="data/clip_129_buildings_2.js"></script>
        <style>
        #map {
            width: 989px;
            height: 627px;
        }
        </style>
          <!--leaflet draw-->
          <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">
          <!--leaflet style editor and plugins-->
          <link rel="stylesheet" href="css/Leaflet.StyleEditor.css">
          <link rel="stylesheet" href="css/easy-button.css">
          <link rel="stylesheet" href="css/L.Control.OpenCageSearch.css">
          <link rel="stylesheet" href="css/fontawesome-all.min.css">
          <script src="js/Control.Draw.js"></script>
          <script src="js/easy-button.js"></script>
          <script src="js/L.Control.Layers.Tree.js"></script>
          <script src="js/L.Control.OpenCageSearch.js"></script>
          <script src="js/Leaflet.Draw.Event.js"></script>
          <script src="js/Leaflet.StyleEditor.js"></script>
          <script src="js/Leaflet.StyleForms.js"></script>
<!-- Include socket.io-client library -->
          <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script> 

    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="InterfaceCivilProtection">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>
  <body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="fr"><header class="u-clearfix u-container-align-center u-grey-80 u-header u-header" id="sec-a88a"><div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <a href="https://k12854b.github.io/clouddoc.gethub.io/Index.html" class="u-align-center u-border-none u-btn u-btn-round u-button-style u-grey-70 u-hover-grey-75 u-radius-50 u-text-active-white u-btn-1">Homepage </a>
      </div></header>
    <section class="u-clearfix u-grey-10 u-section-1" id="sec-295f">
      <div class="data-layout-selected u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
        <div class="u-layout">
          <div class="u-layout-row">
            <div class="u-container-style u-grey-50 u-layout-cell u-size-40 u-layout-cell-1">
              <div class="u-container-layout u-container-layout-1" id="map">
          <!--map script-->
                  <script src="js/mapCP.js"></script>
                  <script src="handleButtonsave.js"></script>
              </div>
            </div>
            <div class="u-container-style u-grey-80 u-layout-cell u-size-20 u-layout-cell-2">
              <div class="u-container-layout u-container-layout-2">
                <input type="text" id="messageInput" value="Test message"/><br>
                <button id="btn1"  class="u-align-center u-border-none u-btn u-btn-round u-button-style u-hover-grey-75 u-palette-2-base u-radius-50 u-text-active-white u-btn-1">Send to fog </button>
                
                <button  onclick="saveDrawnFeatures()" id="btn2" class="u-align-center u-border-none u-btn u-btn-round u-button-style u-hover-grey-75 u-palette-2-base u-radius-50 u-text-active-white u-btn-2">Share with my edge </button>
                <button id="send-geojson-btn, share with my edge" onclick="sendDrawnFeatures()"  class="u-align-center u-border-none u-btn u-btn-round u-button-style u-hover-grey-75 u-palette-2-base u-radius-50 u-text-active-white u-btn-3">share with edge 5503</button>
                <button id="send-geojson-btn, btn4" onclick="sendDrawnFeatures()"  class="u-align-center u-border-none u-btn u-btn-round u-button-style u-hover-grey-75 u-palette-2-base u-radius-50 u-text-active-white u-btn-3">Send to P12</button>
                
                <button onclick="deleteAllGeoJson()"  class="u-align-center u-border-none u-btn u-btn-round u-button-style u-custom-color-1 u-hover-grey-75 u-radius-50 u-text-active-white u-btn-4">Disaster cleared </button>
                <script>
                  //data from login
                  let me="P11";
                  let medge="EDGE-5502";
                  const socket = new WebSocket('ws://localhost:5502');
                  socket.addEventListener('open',  () => {
                    let message={type:"id",src:me,dst:"server"};
                    socket.send(JSON.stringify(message));
                    console.log('Connected to server');
                  });
            
                  socket.addEventListener('message', (event) => {
                    const messageDiv = document.createElement('div');
                    messageDiv.textContent = event.data;
                    document.getElementById('messages').appendChild(messageDiv);
                  });
            
                  document.getElementById('btn1').addEventListener('click', () => {
                    const messageInput = document.getElementById('messageInput');
                    const data = messageInput.value;
                    
                    let message={type:"data",src:me,dst:"FOG",data:data};
                    socket.send(JSON.stringify(message));
                    //messageInput.value = '';
                  });
                  
                  document.getElementById('btn2').addEventListener('click', () => {
                    const messageInput = document.getElementById('messageInput');
                    const data = messageInput.value;
                    
                    let message={type:"data",src:me,edge:medge,dst:"all", data:data};
                    socket.send(JSON.stringify(message));
                    //messageInput.value = '';
                  });
                  
                  document.getElementById('btn3').addEventListener('click', () => {
                    const messageInput = document.getElementById('messageInput');
                    const data = messageInput.value;
                    
                    let message={type:"data",src:me,edge:"EDGE-5503",dst:"all", data:data};
                    socket.send(JSON.stringify(message));
                    //messageInput.value = '';
                  });
                  
                  document.getElementById('btn4').addEventListener('click', () => {
                    const messageInput = document.getElementById('messageInput');
                    const data = messageInput.value;
                    
                    let message={type:"data",src:me,edge:medge,dst:"P12", data:data};
                    socket.send(JSON.stringify(message));
                    //messageInput.value = '';
                  });
               </script>
              </div>
            </div>
            </div>
          </div>
      </div>
    </section>
 
    <section class="u-backlink u-clearfix u-grey-80">
      			
		
    
    </section>
</body></html>
